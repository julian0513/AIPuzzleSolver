/* index.css */

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ---------- Base (page background + sizing) ---------- */
@layer base {
  html, body, #root { height: 100%; }

  /* Stop page scrolling */
  html, body {
    overflow: hidden;
    overscroll-behavior: none;
  }

  body {
    margin: 0; /* avoid default body margin causing scroll */
    background: #ffffff;
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "SF Pro Text",
      "Segoe UI", Roboto, "Helvetica Neue", Arial, "Apple Color Emoji",
      "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
    color: #0f172a; /* slate-900-ish */
  }
}

/* ---------- CSS vars ---------- */
/* SLIGHT SHRINK of the board */
:root { --board-size: min(80vmin, 520px); }

/* ---------- Tokens used across components ---------- */
@layer utilities {
  .bg-panel2      { background: rgba(0,0,0,0.04); }
  .text-text      { color: #0f172a; }
  .text-muted     { color: rgba(15,23,42,0.65); }
  .rounded-btn    { border-radius: 14px; }
  .rounded-grid   { border-radius: 16px; }
  .shadow-soft    { box-shadow: 0 20px 60px rgba(0,0,0,0.12); }
  .outline-accent { outline-color: rgba(37, 99, 235, .5); }

  /* Directional shadows */
  .shadow-even        { box-shadow: 0 10px 26px rgba(0,0,0,0.10); }
  .shadow-top-right   { box-shadow: -6px 8px 28px rgba(0,0,0,0.12); }
  .shadow-bottom-left { box-shadow:  6px -8px 28px rgba(0,0,0,0.12); }

  .aspect-square { aspect-ratio: 1 / 1; }

  /* Board hover */
  .board-hover { transition: box-shadow .18s ease, transform .18s ease, outline-color .18s ease; }
  .board-hover:hover {
    box-shadow: 0 16px 36px rgba(0,0,0,.14);
    outline: 1px solid rgba(37,99,235,.20);
    transform: translateY(-2px) scale(1.005);
  }

  /* Status label hover */
  .status-hover { transition: transform .15s ease, color .15s ease, text-shadow .15s ease; }
  .status-hover:hover {
    color: #0b1220;
    transform: translateY(-1px) scale(1.01);
    text-shadow: 0 2px 10px rgba(37,99,235,.18);
  }

  /* Arrow-pad grid */
  .arrow-pad {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(3, 1fr);
    grid-template-areas:
      ". up ."
      "left . right"
      ". down .";
    gap: 8px;
  }

  /* Upload spacing */
  .upload-offset { right: -150px; top: 0.5rem; }
  @media (max-width: 820px){
    .upload-relocate {
      position: static !important; right: auto !important; top: auto !important;
      margin-top: 12px; justify-content: center;
    }
  }

  /* Coach / hint helpers — soft glow instead of outline */
  .coach-good {
    box-shadow:
      0 0 0 1px rgba(34,197,94,.30) inset,
      0 0 18px 6px rgba(34,197,94,.25);
  }
  .coach-ok {
    box-shadow:
      0 0 0 1px rgba(234,179,8,.30) inset,
      0 0 14px 4px rgba(234,179,8,.22);
  }
  .coach-bad {
    box-shadow:
      0 0 0 1px rgba(239,68,68,.30) inset,
      0 0 18px 6px rgba(239,68,68,.25);
  }
  .arrow-press { transform: translateY(-2px) scale(1.03); }
  .hint-flash  { box-shadow: 0 0 0 3px rgba(37,99,235,.22) inset; }

  /* Nudge the whole app stack up a bit (we’ll apply this in App.jsx) */
  .app-nudge-up { margin-top: clamp(-12px, -2.2vmin, -24px); }
}

/* ---------- Components ---------- */
@layer components {
  #bg-shapes { position: fixed; inset: 0; pointer-events: none; z-index: 0; }

  .overlay {
    position: fixed; inset: 0; display: none; place-items: center;
    background: rgba(0,0,0,.08); backdrop-filter: blur(6px); z-index: 40;
  }
  .overlay.show { display: grid; }

  .solution-panel {
    width: min(92vw, 360px);
    background: #ffffff;
    border: 1px solid rgba(0,0,0,.06);
    border-radius: 20px;
    padding: 12px;
    box-shadow: 0 20px 60px rgba(0,0,0,.12);
    margin-bottom: 12px;
  }
  .solution-panel .viz { display: flex; gap: 4px; height: 10px; margin-bottom: 8px; }
  .solution-panel .viz > div {
    background: rgba(0,0,0,.08);
    border-radius: 6px;
  }
  .solution-panel .viz > div.active { background: rgba(37,99,235,.55); }
  .steps-list { display: flex; flex-direction: column; gap: 6px; max-height: 220px; overflow: auto; }
  .step-item { display: grid; grid-template-columns: 28px 1fr; align-items: center; gap: 8px; padding: 6px; border-radius: 10px; }
  .step-item.active { outline: 2px solid rgba(37,99,235,.45); }

  .confetti-canvas {
    position: fixed; inset: 0; width: 100vw; height: 100vh;
    pointer-events: none; z-index: 50;
  }
}

/* ---------- Floating shapes (animations) ---------- */
@layer utilities {
  .shape {
    position: absolute;
    opacity: 0.5;
    mix-blend-mode: screen;
    filter: blur(0.2px);
    animation: drift var(--dur, 12s) ease-in-out infinite alternate;
    transform-origin: center;
  }
  .size1 { width: 6rem;  height: 6rem;  }
  .size2 { width: 9rem;  height: 9rem;  }
  .size3 { width: 12rem; height: 12rem; }

  .circle  { border-radius: 9999px; }
  .square  { border-radius: 18px; }
  .triangle{ clip-path: polygon(50% 0%, 0% 100%, 100% 100%); }
  .pentagon{ clip-path: polygon(50% 0%, 95% 35%, 77% 95%, 23% 95%, 5% 35%); }
  .hexagon { clip-path: polygon(25% 3%, 75% 3%, 100% 50%, 75% 97%, 25% 97%, 0% 50%); }
}

@keyframes drift {
  0%   { transform: translate(0,0) rotate(0deg) scale(1); }
  100% { transform: translate(var(--tx, 40vw), var(--ty, -30vh)) rotate(360deg) scale(1.08); }
}

@media (prefers-reduced-motion: reduce) {
  .shape { animation: none !important; }
  .board-hover, .status-hover { transition: none !important; }
}

@layer utilities {
  .focus-ring:focus-visible {
    outline: 2px solid rgba(37,99,235,.55);
    outline-offset: 2px;
    border-radius: 14px;
  }
}

@layer utilities {
  .shadow-top-left { box-shadow: 6px 8px 28px rgba(0,0,0,0.12); }
}
